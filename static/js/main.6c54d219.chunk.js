(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{35:function(n,t,e){"use strict";e.r(t);var r=e(0),c=e(1),i=e(20),o=e.n(i),a=e(4),u=e(2),s=e(3),j=e(7),d=e(5),b="token",f=function(n){localStorage.setItem(b,n)},l=function(){return localStorage.getItem(b)},x="https://student-json-api.lidemy.me",p=function(){return fetch("".concat(x,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},O=function(){var n=l();return fetch("".concat(x,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function h(){var n=Object(u.a)(["\n  display: flex;\n  position: fixed;\n  justify-content: center;\n  top: 100px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  font-size: 36px;\n"]);return h=function(){return n},n}function v(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.2);\n"]);return v=function(){return n},n}function g(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]);return g=function(){return n},n}function m(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(12, 34, 56, 0.2);\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n"]);return m=function(){return n},n}function w(){var n=Object(u.a)(["\n  max-width: 800px;\n  margin: 0 auto;\n"]);return w=function(){return n},n}var y=s.a.div(w()),S=s.a.div(m()),k=Object(s.a)(j.b)(g()),C=s.a.div(v()),z=s.a.div(h());function P(n){var t=n.post;return Object(r.jsxs)(S,{children:[Object(r.jsx)(k,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(C,{children:new Date(t.createdAt).toLocaleString()})]})}function L(){var n=Object(c.useState)([]),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)(!0),u=Object(a.a)(o,2),s=u[0],j=u[1];return Object(c.useEffect)((function(){p().then((function(n){return i(n)})),j(!1)}),[e]),Object(r.jsxs)(y,{children:[s&&Object(r.jsx)(z,{children:"Loading..."}),e.map((function(n){return Object(r.jsx)(P,{post:n},n.id)}))]})}var $=Object(c.createContext)(null);function U(){var n=Object(u.a)(["\n  color: red;\n"]);return U=function(){return n},n}function _(){var n=Object(u.a)(["\n  width: 92px;\n  height: 40px;\n  border-radius: 3px;\n  background-color: black;\n  color: white;\n  font-size: 15px;\n  margin-top: 20px;\n"]);return _=function(){return n},n}function A(){var n=Object(u.a)(["\n  border: solid 1px #d0d0d0;\n  width: 287px;\n  height: 23px;\n  margin: 10px 20px;\n"]);return A=function(){return n},n}function E(){var n=Object(u.a)(["\n  font-size: 36px;\n  text-align: center;\n"]);return E=function(){return n},n}function J(){var n=Object(u.a)(["\n  width: 450px;\n  height: 300px;\n  padding: 60px;\n  border: solid 1px #000000;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return J=function(){return n},n}function B(){var n=Object(u.a)(["\n  margin: 100px auto;\n  width: 550px;\n}\n"]);return B=function(){return n},n}var D=s.a.div(B()),N=s.a.form(J()),T=s.a.h1(E()),I=s.a.input(A()),M=s.a.button(_()),G=s.a.div(U());function q(){var n=Object(c.useContext)($).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),i=e[0],o=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),j=s[0],b=s[1],l=Object(c.useState)(),p=Object(a.a)(l,2),h=p[0],v=p[1],g=Object(d.f)();return Object(r.jsx)(D,{children:Object(r.jsxs)(N,{onSubmit:function(){v(null),function(n,t){return fetch("".concat(x,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(i,j).then((function(t){if(0===t.ok)return v(t.message);f(t.token),O().then((function(t){if(1!==t.ok)return f(null),v(t.toString());n(t.data),g.push("/")}))}))},children:[Object(r.jsx)(T,{children:"\u767b\u5165"}),Object(r.jsxs)("div",{children:["Username:",Object(r.jsx)(I,{value:i,onChange:function(n){return o(n.target.value)}})]}),Object(r.jsxs)("div",{children:["Password:",Object(r.jsx)(I,{type:"password",value:j,onChange:function(n){return b(n.target.value)}})]}),Object(r.jsx)(M,{children:"\u767b\u5165"}),h&&Object(r.jsx)(G,{children:h})]})})}function F(){var n=Object(u.a)(["\n  color: red;\n"]);return F=function(){return n},n}function H(){var n=Object(u.a)(["\n  width: 92px;\n  height: 40px;\n  border-radius: 3px;\n  background-color: black;\n  color: white;\n  font-size: 15px;\n  margin-top: 20px;\n"]);return H=function(){return n},n}function K(){var n=Object(u.a)(["\n  border: solid 1px #d0d0d0;\n  width: 287px;\n  height: 23px;\n  margin: 10px 20px;\n"]);return K=function(){return n},n}function Q(){var n=Object(u.a)(["\n  font-size: 36px;\n  text-align: center;\n"]);return Q=function(){return n},n}function R(){var n=Object(u.a)(["\n  width: 450px;\n  height: 300px;\n  padding: 60px;\n  border: solid 1px #000000;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return R=function(){return n},n}function V(){var n=Object(u.a)(["\n  margin: 100px auto;\n  width: 550px;\n}\n"]);return V=function(){return n},n}var W=s.a.div(V()),X=s.a.form(R()),Y=s.a.h1(Q()),Z=s.a.input(K()),nn=s.a.button(H()),tn=s.a.div(F());function en(){var n=Object(c.useContext)($).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),i=e[0],o=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),j=s[0],b=s[1],l=Object(c.useState)(""),p=Object(a.a)(l,2),h=p[0],v=p[1],g=Object(c.useState)(),m=Object(a.a)(g,2),w=m[0],y=m[1],S=Object(d.f)();return Object(r.jsx)(W,{children:Object(r.jsxs)(X,{onSubmit:function(){y(null),function(n,t,e){return fetch("".concat(x,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(i,j,h).then((function(t){if(0===t.ok)return y(t.message);f(t.token),O().then((function(e){if(1!==t.ok)return f(null),y(e.toString());n(e.data),S.push("/")}))}))},children:[Object(r.jsx)(Y,{children:"\u8a3b\u518a"}),Object(r.jsxs)("div",{children:["Username:",Object(r.jsx)(Z,{value:j,onChange:function(n){return b(n.target.value)}})]}),Object(r.jsxs)("div",{children:["Password:",Object(r.jsx)(Z,{type:"password",value:h,onChange:function(n){return v(n.target.value)}})]}),Object(r.jsxs)("div",{children:["Nickname:",Object(r.jsx)(Z,{value:i,onChange:function(n){return o(n.target.value)}})]}),Object(r.jsx)(nn,{children:"\u8a3b\u518a"}),w&&Object(r.jsx)(tn,{children:w})]})})}function rn(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  "," {\n    margin-left: 64px;\n  }\n"]);return rn=function(){return n},n}function cn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"]);return cn=function(){return n},n}function on(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]);return on=function(){return n},n}function an(){var n=Object(u.a)(["\n  font-size: 28px;\n  color: black;\n  text-decoration: none;\n  font-weight: bold;\n"]);return an=function(){return n},n}function un(){var n=Object(u.a)(["\n  background: white;\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0 32px;\n"]);return un=function(){return n},n}var sn=s.a.div(un()),jn=Object(s.a)(j.b)(an()),dn=s.a.div(on()),bn=Object(s.a)(j.b)(cn(),(function(n){return n.$active&&"background: rgba(0, 0, 0, 0.1);"})),fn=s.a.div(rn(),dn);function ln(n){n.callGetMe;var t=Object(d.g)(),e=Object(c.useContext)($),i=e.user,o=e.setUser,a=Object(d.f)();return Object(r.jsxs)(sn,{children:[Object(r.jsxs)(fn,{children:[Object(r.jsx)(jn,{to:"/",$active:"/"===t.pathname,children:"Derek's Blog"}),Object(r.jsxs)(dn,{children:[Object(r.jsx)(bn,{to:"/post-list",$active:"/post-list"===t.pathname,children:"\u6587\u7ae0\u5217\u8868"}),i&&Object(r.jsx)(bn,{to:"/new-post",$active:"/new-post"===t.pathname,children:"\u767c\u5e03\u6587\u7ae0"}),Object(r.jsx)(bn,{to:"/about",$active:"/about"===t.pathname,children:"\u95dc\u65bc\u6211"})]})]}),Object(r.jsxs)(dn,{children:[Object(r.jsx)(bn,{to:"/register",$active:"/register"===t.pathname,children:"\u8a3b\u518a"}),!i&&Object(r.jsx)(bn,{to:"/login",$active:"/login"===t.pathname,children:"\u767b\u5165"}),i&&Object(r.jsx)(bn,{onClick:function(){f(""),o(null),"/"!==t.pathname&&a.push("/")},children:"\u767b\u51fa"})]})]})}function xn(){var n=Object(u.a)(["\n  display: flex;\n  position: fixed;\n  justify-content: center;\n  top: 100px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  font-size: 36px;\n"]);return xn=function(){return n},n}function pn(){var n=Object(u.a)(["\n  \n"]);return pn=function(){return n},n}function On(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.2);\n"]);return On=function(){return n},n}function hn(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]);return hn=function(){return n},n}function vn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  border-bottom: 1px solid rgba(12, 34, 56, 0.2);\n  padding: 20px;\n"]);return vn=function(){return n},n}function gn(){var n=Object(u.a)(["\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]);return gn=function(){return n},n}function mn(){var n=Object(u.a)(["\n  max-width: 800px;\n  margin: 64px auto;\n"]);return mn=function(){return n},n}var wn=s.a.div(mn()),yn=s.a.div(gn()),Sn=s.a.div(vn()),kn=s.a.div(hn()),Cn=s.a.div(On()),zn=s.a.div(pn()),Pn=s.a.div(xn());function Ln(n){var t=n.post;return Object(r.jsxs)(yn,{children:[Object(r.jsxs)(Sn,{children:[Object(r.jsx)(kn,{children:t.title}),Object(r.jsx)(Cn,{children:new Date(t.createdAt).toLocaleString()})]}),Object(r.jsx)(zn,{children:t.body})]})}function $n(){var n=Object(c.useState)([]),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)(!0),u=Object(a.a)(o,2),s=u[0],j=u[1],b=Object(d.h)().id;return Object(c.useEffect)((function(){(function(n){return fetch("".concat(x,"/posts?id=").concat(n)).then((function(n){return n.json()}))})(b).then((function(n){i(n)})),j(!1)}),[b]),Object(r.jsxs)(wn,{children:[s&&Object(r.jsx)(Pn,{children:"Loading..."}),e.map((function(n,t){return Object(r.jsx)(Ln,{post:n},t)}))]})}function Un(){var n=Object(u.a)(["\n  color: red;\n"]);return Un=function(){return n},n}function _n(){var n=Object(u.a)(["\n  width: 92px;\n  height: 40px;\n  border-radius: 3px;\n  background-color: black;\n  color: white;\n  font-size: 15px;\n  margin-top: 20px;\n"]);return _n=function(){return n},n}function An(){var n=Object(u.a)(["\n  border: solid 1px #d0d0d0;\n  margin: 10px 20px;\n"]);return An=function(){return n},n}function En(){var n=Object(u.a)(["\n  border: solid 1px #d0d0d0;\n  width: 287px;\n  height: 23px;\n  margin: 10px 20px;\n"]);return En=function(){return n},n}function Jn(){var n=Object(u.a)(["\n  display: flex;\n  \n"]);return Jn=function(){return n},n}function Bn(){var n=Object(u.a)(["\n  font-size: 36px;\n  text-align: center;\n"]);return Bn=function(){return n},n}function Dn(){var n=Object(u.a)(["\n  width: 450px;\n  height: 400px;\n  padding: 60px;\n  border: solid 1px #000000;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Dn=function(){return n},n}function Nn(){var n=Object(u.a)(["\n  margin: 100px auto;\n  width: 550px;\n}\n"]);return Nn=function(){return n},n}var Tn=s.a.div(Nn()),In=s.a.form(Dn()),Mn=s.a.h1(Bn()),Gn=s.a.div(Jn()),qn=s.a.input(En()),Fn=s.a.textarea(An()),Hn=s.a.button(_n()),Kn=s.a.div(Un());function Qn(){var n=Object(c.useState)(""),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)(""),u=Object(a.a)(o,2),s=u[0],j=u[1],b=Object(c.useState)(),f=Object(a.a)(b,2),p=f[0],O=f[1],h=Object(d.f)();return Object(r.jsx)(Tn,{children:Object(r.jsxs)(In,{onSubmit:function(){O(null),function(n,t){var e=null;return l()&&(e=l()),fetch("".concat(x,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(e,s).then((function(n){if(1!==n.ok)return O(n.message)})),h.push("/")},children:[Object(r.jsx)(Mn,{children:"\u65b0\u589e\u6587\u7ae0"}),Object(r.jsxs)("div",{children:["Title:",Object(r.jsx)(qn,{value:e,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(Gn,{children:["Content:",Object(r.jsx)(Fn,{cols:"33",rows:"12",value:s,onChange:function(n){return j(n.target.value)}})]}),Object(r.jsx)(Hn,{children:"\u767c\u5e03"}),p&&Object(r.jsx)(Kn,{children:p})]})})}function Rn(){var n=Object(u.a)(["\n  display: flex;\n  position: fixed;\n  justify-content: center;\n  top: 100px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  font-size: 36px;\n"]);return Rn=function(){return n},n}function Vn(){var n=Object(u.a)([""]);return Vn=function(){return n},n}function Wn(){var n=Object(u.a)(['\n  cursor: pointer;\n  margin: 0 5px;\n  &:before {\n    content: ">>";\n  }\n']);return Wn=function(){return n},n}function Xn(){var n=Object(u.a)(['\n  cursor: pointer;\n  margin: 0 5px;\n  &:before {\n    content: ">";\n  }\n']);return Xn=function(){return n},n}function Yn(){var n=Object(u.a)(['\n  cursor: pointer;\n  margin: 0 5px;\n  &:before {\n    content: "<";\n  }\n']);return Yn=function(){return n},n}function Zn(){var n=Object(u.a)(['\n  cursor: pointer;\n  margin: 0 5px;\n  &:before {\n    content: "<<";\n  }\n']);return Zn=function(){return n},n}function nt(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 10px;\n"]);return nt=function(){return n},n}function tt(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.2);\n"]);return tt=function(){return n},n}function et(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]);return et=function(){return n},n}function rt(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(12, 34, 56, 0.2);\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n"]);return rt=function(){return n},n}function ct(){var n=Object(u.a)(["\n  max-width: 800px;\n  margin: 0 auto;\n"]);return ct=function(){return n},n}var it=s.a.div(ct()),ot=s.a.div(rt()),at=Object(s.a)(j.b)(et()),ut=s.a.div(tt()),st=s.a.div(nt()),jt=s.a.div(Zn()),dt=s.a.div(Yn()),bt=s.a.div(Xn()),ft=s.a.div(Wn()),lt=s.a.div(Vn()),xt=s.a.div(Rn());function pt(n){var t=n.post;return Object(r.jsxs)(ot,{children:[Object(r.jsx)(at,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(ut,{children:new Date(t.createdAt).toLocaleString()})]})}function Ot(n){var t=n.page,e=n.setPage,c=n.totalPages;return Object(r.jsxs)(st,{children:[Object(r.jsx)(jt,{onClick:function(){return ht("home",t,e,c)}}),Object(r.jsx)(dt,{onClick:function(){return ht("pageup",t,e,c)}}),Object(r.jsxs)(lt,{children:[t," / ",c]}),Object(r.jsx)(bt,{onClick:function(){return ht("pagedown",t,e,c)}}),Object(r.jsx)(ft,{onClick:function(){return ht("end",t,e,c)}})]})}function ht(n,t,e,r){"home"===n?e(1):"end"===n?e(r):"pageup"===n&&t>1?e(t-1):"pagedown"===n&&t<r&&e(t+1)}function vt(){var n=Object(c.useState)([]),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)(1),u=Object(a.a)(o,2),s=u[0],j=u[1],d=Object(c.useState)(1),b=Object(a.a)(d,2),f=b[0],l=b[1],O=Object(c.useState)(!0),h=Object(a.a)(O,2),v=h[0],g=h[1],m=Math.ceil(s/5);return Object(c.useEffect)((function(){p().then((function(n){return j(n.length)})),function(n,t){return fetch("".concat(x,"/posts?_sort=createdAt&_order=desc&_limit=").concat(n,"&_page=").concat(t)).then((function(n){return n.json()}))}(5,f).then((function(n){return i(n)})),g(!1)}),[f]),Object(r.jsxs)(it,{children:[v&&Object(r.jsx)(xt,{children:"Loading..."}),e.map((function(n){return Object(r.jsx)(pt,{post:n},n.id)})),!v&&Object(r.jsx)(Ot,{page:f,setPage:l,totalPages:m})]})}function gt(){var n=Object(u.a)([""]);return gt=function(){return n},n}function mt(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  border-bottom: 1px solid rgba(12, 34, 56, 0.2);\n  padding: 20px;\n  font-size: 24px;\n"]);return mt=function(){return n},n}function wt(){var n=Object(u.a)(["\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]);return wt=function(){return n},n}function yt(){var n=Object(u.a)(["\n  max-width: 800px;\n  margin: 64px auto;\n"]);return yt=function(){return n},n}var St=s.a.div(yt()),kt=s.a.div(wt()),Ct=s.a.div(mt()),zt=s.a.div(gt());function Pt(){return Object(r.jsx)(St,{children:Object(r.jsxs)(kt,{children:[Object(r.jsx)(Ct,{children:"\u95dc\u65bc\u6211"}),Object(r.jsx)(zt,{children:"\u5927\u5bb6\u597d\uff0c\u6b61\u8fce\u4f86\u5230\u6211\u7684\u90e8\u843d\u683c"})]})})}function Lt(){var n=Object(u.a)(["\n  padding-top: 64px;\n"]);return Lt=function(){return n},n}var $t=s.a.div(Lt());var Ut=function(){var n=Object(c.useState)(null),t=Object(a.a)(n,2),e=t[0],i=t[1];return Object(c.useLayoutEffect)((function(){(l()||null)&&O().then((function(n){n.ok&&i(n.data)}))}),[]),Object(r.jsx)($.Provider,{value:{user:e,setUser:i},children:Object(r.jsx)($t,{children:Object(r.jsxs)(j.a,{children:[Object(r.jsx)(ln,{}),Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{exact:!0,path:"/",children:Object(r.jsx)(L,{})}),Object(r.jsx)(d.a,{path:"/register",children:Object(r.jsx)(en,{})}),Object(r.jsx)(d.a,{path:"/login",children:Object(r.jsx)(q,{})}),Object(r.jsx)(d.a,{path:"/post-list",children:Object(r.jsx)(vt,{})}),Object(r.jsx)(d.a,{path:"/post/:id",children:Object(r.jsx)($n,{})}),Object(r.jsx)(d.a,{path:"/new-post",children:Object(r.jsx)(Qn,{})}),Object(r.jsx)(d.a,{path:"/about",children:Object(r.jsx)(Pt,{})})]})]})})})};o.a.render(Object(r.jsx)(Ut,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.6c54d219.chunk.js.map